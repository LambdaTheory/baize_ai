# AI图片信息提取工具 - exe打包指南

## 打包方法概览

本项目提供了多种将Python应用打包成exe的方法：

### 方法1: 使用批处理文件 (推荐新手)
最简单的方法，双击运行即可：
```
build.bat
```

### 方法2: 使用Python打包脚本
运行Python脚本进行打包：
```bash
python build_exe.py
```

### 方法3: 使用PyInstaller命令行
手动使用PyInstaller命令：
```bash
pyinstaller --onefile --windowed --name="AI图片信息提取工具" main.py
```

### 方法4: 使用spec配置文件 (高级用户)
```bash
pyinstaller ai_image_tool.spec
```

## 详细步骤

### 准备工作
1. 确保已安装Python 3.10+
2. 安装所有依赖包：
   ```bash
   pip install -r requirements.txt
   ```

### 打包过程
1. 选择上述任一方法进行打包
2. 等待打包完成（可能需要几分钟）
3. 在 `dist/` 目录中找到生成的exe文件

## 打包配置说明

### PyInstaller参数说明：
- `--onefile`: 打包成单个exe文件（推荐）
- `--windowed`: 隐藏控制台窗口（GUI应用必需）
- `--name`: 指定exe文件名
- `--icon`: 指定应用图标
- `--add-data`: 包含资源文件
- `--hidden-import`: 指定隐藏导入的模块

### 包含的文件：
- 所有Python源代码
- PyQt5和qfluentwidgets库
- Pillow图像处理库
- assets目录中的资源文件
- 其他依赖项

## 可能遇到的问题

### 问题1: "找不到模块"错误
**解决方案**: 在spec文件中添加缺失的模块到`hiddenimports`列表

### 问题2: 资源文件丢失
**解决方案**: 确保使用`--add-data`参数包含所有资源文件

### 问题3: exe文件太大
**解决方案**:
- 使用`--exclude-module`排除不需要的模块
- 考虑使用虚拟环境减少依赖
- 使用UPX压缩（已在spec文件中启用）

### 问题4: 杀毒软件误报
**解决方案**:
- 将exe文件添加到杀毒软件白名单
- 使用代码签名证书（商业发布推荐）

## 优化建议

### 减小文件大小：
1. 使用虚拟环境只安装必需的包
2. 移除开发依赖（pytest等）
3. 压缩资源文件

### 提高性能：
1. 启用UPX压缩
2. 使用`--strip`移除调试信息
3. 考虑使用`--onedir`模式（启动稍快但文件较多）

### 发布准备：
1. 添加应用图标
2. 设置版本信息
3. 创建安装程序（NSIS/Inno Setup）
4. 进行全面测试

## 测试清单

打包完成后，请测试以下功能：
- [ ] 应用正常启动
- [ ] 界面显示正确
- [ ] 图片读取功能正常
- [ ] 信息提取功能正常
- [ ] 数据库操作正常
- [ ] 所有按钮和菜单可用

## 文件结构

打包后的文件结构：
```
dist/
└── AI图片信息提取工具.exe  # 最终的可执行文件
```

## 分发建议

1. **单文件分发**: 直接分发exe文件
2. **压缩包分发**: 将exe文件打包成zip
3. **安装程序**: 创建专业的安装程序
4. **便携版**: 包含配置文件的完整包

## 更新维护

当代码更新时：
1. 重新运行打包脚本
2. 测试新版本功能
3. 更新版本号
4. 重新分发给用户 