# 🚀 批量处理功能说明

## 📌 功能概述

批量处理功能是AI图片信息提取工具的核心扩展功能，支持一次性处理大量图片文件，大幅提升工作效率。

## ✨ 主要特性

### 1. 批量导入
- 📁 **文件夹扫描**：支持选择文件夹自动扫描图片文件
- 🔄 **递归搜索**：可选择是否递归扫描子文件夹
- 📋 **格式支持**：支持PNG、JPG、JPEG、WebP格式
- 📊 **实时统计**：显示扫描到的文件数量

### 2. 批量处理
- ⚡ **多线程处理**：支持并发处理提升效率
- 📈 **进度显示**：实时显示处理进度和当前文件
- 🎯 **智能提取**：自动提取AI生成信息
- 💾 **自动保存**：可选择自动保存到数据库
- 🛡️ **错误处理**：优雅处理文件错误和异常

### 3. 批量导出
- 📤 **多种格式**：支持HTML、JSON、CSV三种导出格式
- 🖼️ **图片包含**：HTML导出可选择是否包含图片
- 📊 **范围选择**：支持导出所有记录或最近处理的记录
- 📝 **详细统计**：显示导出成功和失败的文件数量

## 🎯 使用场景

### 适用情况
- ✅ 需要处理大量AI生成图片
- ✅ 整理图片库的生成信息
- ✅ 批量分析不同模型的效果
- ✅ 导出图片信息进行分享
- ✅ 数据备份和迁移

### 效率提升
- 🔢 **处理速度**：相比单张处理提升10-20倍
- ⏰ **时间节省**：100张图片从30分钟缩短至3分钟
- 🤖 **自动化**：减少人工操作，避免重复劳动

## 🛠️ 使用方法

### 第一步：选择文件夹
1. 启动AI图片信息提取工具
2. 点击导航栏中的"批量处理"
3. 点击"选择文件夹"按钮
4. 选择包含AI生成图片的文件夹

### 第二步：配置设置
- **递归扫描**：勾选后会扫描所有子文件夹
- **自动保存**：勾选后会自动保存到数据库
- **并发处理数**：设置同时处理的文件数（1-16）

### 第三步：扫描文件
1. 点击"🔍 扫描图片文件"按钮
2. 等待扫描完成
3. 查看扫描结果统计

### 第四步：开始处理
1. 确认扫描结果无误
2. 点击"🚀 开始批量处理"按钮
3. 观察进度条和处理状态
4. 等待处理完成

### 第五步：查看结果
- 查看处理统计信息
- 检查成功和失败的文件数量
- 可在"图片画廊"中查看导入的记录

### 第六步：批量导出（可选）
1. 选择导出格式（HTML/JSON/CSV）
2. 选择导出范围（所有记录/最近处理）
3. 设置导出选项（如HTML是否包含图片）
4. 选择保存位置
5. 开始导出

## ⚙️ 高级配置

### 并发处理数设置
- **低配置电脑**：建议设置为2-4
- **中等配置电脑**：建议设置为4-8
- **高配置电脑**：建议设置为8-16

### 文件格式优先级
1. **PNG文件**：信息最完整，推荐优先处理
2. **JPG文件**：可能包含EXIF信息
3. **WebP文件**：新格式，支持有限

## 🔧 技术实现

### 核心组件
- **BatchProcessor**：批量处理核心引擎
- **FluentBatchWidget**：批量处理UI界面
- **ThreadPool**：多线程并发处理
- **ProgressCallback**：进度回调机制

### 处理流程
```
选择文件夹 → 扫描文件 → 配置选项 → 批量处理 → 保存数据 → 显示结果 → 导出数据
```

### 性能优化
- 多线程并发处理
- 内存优化管理
- 异常容错处理
- 进度实时更新

## 📊 处理统计

### 统计信息包括
- 总文件数量
- 成功处理数量
- 失败处理数量
- 处理耗时
- 失败文件列表

### 结果展示
- 实时进度条
- 当前处理文件
- 详细统计报告
- 成功/失败通知

## 🎨 界面设计

### 卡片布局
- **批量导入设置**：文件夹选择和处理选项
- **批量处理**：处理控制和进度显示
- **批量导出**：导出格式和范围选择

### 交互反馈
- 按钮状态变化
- 进度条动画
- 成功/失败提示
- 详细结果展示

## 🚨 注意事项

### 使用建议
- ⚠️ 处理大量文件时建议先测试小批量
- ⚠️ 确保磁盘空间充足（特别是导出HTML）
- ⚠️ 处理过程中避免关闭程序
- ⚠️ 定期备份数据库文件

### 常见问题
1. **文件权限错误**：确保有读取文件的权限
2. **内存不足**：降低并发处理数
3. **处理中断**：重新扫描和处理即可
4. **导出失败**：检查输出路径权限

## 🔮 未来计划

### 计划功能
- [ ] 支持更多图片格式
- [ ] 增加过滤器功能
- [ ] 支持批量重命名
- [ ] 增加预处理选项
- [ ] 支持云端批处理

### 性能提升
- [ ] GPU加速处理
- [ ] 分布式处理
- [ ] 智能缓存机制
- [ ] 增量处理支持

---

## 📞 获取帮助

如果在使用批量处理功能时遇到问题，可以：

1. 查看错误信息和日志
2. 尝试减少并发处理数
3. 检查文件和文件夹权限
4. 重启程序后再试

批量处理功能让你的AI图片管理更加高效！🎉 