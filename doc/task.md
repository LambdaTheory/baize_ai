# 🧠 AI 图片生成信息提取工具 - 桌面应用需求文档

---

## 📌 项目概述

该工具是一款 **本地运行的桌面应用**，用于读取用户手动导入的 AI 生成图片中的生成信息（如 Prompt、模型、采样器等），并以清晰的方式展示。用户可对图片进行简单管理、记录和导出，**不监听、不上传、不联网，确保隐私安全**。

---

## 🎯 核心目标

- 支持用户 **手动导入（拖拽或选择）AI 生成的图片**
- 从图像中读取并展示其包含的生成信息（Prompt、模型、采样器等）
- 提供简单的图像归档与导出机制
- **100% 本地运行**，不监听、不联网，保护用户隐私

---

## 🧑‍💻 用户操作流程

1. 打开应用，进入主界面
2. 用户拖入或选择本地 PNG / JPG 图像文件
3. 应用自动提取图像的嵌入信息
4. 展示：
   - 缩略图
   - Prompt、模型、采样器等字段
5. 用户可添加备注或标签，保存记录
6. 支持查看、搜索、导出记录

---

## 🧱 技术栈建议

| 模块     | 技术选型                     |
| -------- | ---------------------------- |
| 桌面框架 | `PyQt5`（推荐）或 `Tkinter`  |
| 图像处理 | `Pillow`（读取 PNG 块信息）  |
| 拖拽支持 | `QDropEvent`（PyQt 原生）    |
| 本地存储 | `SQLite3`（推荐）或 JSON     |
| 打包发布 | `PyInstaller` 或 `cx_Freeze` |
| 项目结构 | 模块化 / MVC 架构推荐        |

---

## 📦 核心功能模块

### 1. 图像导入功能

- 支持：
  - 拖拽导入
  - 文件选择器导入
  - 支持 PNG / JPG 格式（优先处理 PNG）
- 采用 PyQt5 的 `dragEnterEvent` 和 `dropEvent`

### 2. 图像生成信息提取

- 从 PNG 文件中提取如下字段（如存在）：
  - `Prompt`
  - `Negative Prompt`
  - `Model`
  - `Sampler`
  - `Steps`
  - `Seed`
  - `CFG Scale`
- 示例字段来源：
  - `img.info['parameters']`
  - PNG 的 `tEXt` 或 `iTXt` 块

### 3. 信息展示

- 图像缩略图
- 信息字段展示（可复制）
- 备注输入框 / 标签输入
- 支持一键导出为 JSON/CSV

### 4. 本地记录保存

- 每个图片记录包含字段：
  - 图片路径
  - 所有生成信息
  - 用户备注/标签
  - 导入时间
- 存储格式：
  - SQLite 数据库（推荐）
  - 或本地 JSON 文件（单文件存储）

### 5. 导出功能

- 批量导出为 JSON 或 CSV
- 可选字段筛选导出（可后期加入）

---

## 🔐 隐私与安全设计

- ❌ 不联网，不上传任何图片
- ❌ 不监听文件夹或自动操作
- ✅ 所有导入行为必须由用户主动发起
- ✅ 所有数据保存在本地，用户可随时删除

---

## 🔄 可扩展功能（后期可选）

- 图像 → Prompt 反推（使用 BLIP、CLIP 模型）
- 批量导入功能（多图拖拽、文件夹导入）
- 标签管理与分类浏览
- 图像搜索（按关键词、模型、备注等）
- 与 Midjourney、NovelAI 等平台对接（需用户导出图）

---

## 📁 推荐项目结构

ai_image_info_reader/
│
├── main.py # 启动入口
├── ui/
│ └── main_window.py # 主界面代码
├── core/
│ ├── image_reader.py # 读取生成信息
│ ├── data_manager.py # 本地数据存储
│ └── model.py # 数据结构定义
├── assets/ # UI 资源、图标等
├── database/
│ └── records.db # SQLite 数据文件
├── README.md
├── requirements.txt
└── setup.py # 打包配置

---

## 🧰 开发建议

- Python 版本：3.10+
- 开发工具：Cursor / VS Code
- UI 快速设计：可使用 `Qt Designer`
- 本地环境建议使用 `venv`
- 打包使用 `PyInstaller` 生成 `.exe` 或 `.app`

---

## ✅ 快速总结

- 🎯 桌面端优先，强调隐私与本地性
- 📦 支持导入 → 提取信息 → 展示 → 存档
- 🚫 不监听、不联网、不自动化行为
- 🔧 支持后续扩展搜索、分类、反推 prompt 等功能



## UI 设计

- 生成 Flat UI 风格
- 使用 QSS 进行样式控制
- 使用 QSS 进行样式控制





